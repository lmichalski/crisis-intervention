{"version":3,"sources":["fnt/Roboto-Regular.ttf","components/MenuItems.tsx","pages/Menu.tsx","hooks/useGameData.ts","pages/Objectives.tsx","hooks/useLogGameEvent.tsx","pages/Decision.tsx","pages/Video.tsx","pages/Credits.tsx","pages/Instructions.tsx","pages/Feedback.tsx","pages/Settings.tsx","pages/Summary.tsx","pages/Resources.tsx","pages/Transition.tsx","pages/Principles.tsx","components/ChartContent.tsx","components/Polaroid.tsx","pages/Chart.tsx","pages/Scenario.tsx","hooks/useStorage.ts","hooks/useGameState.ts","util.ts","pages/Intro.tsx","components/DropDown.tsx","pages/Research.tsx","pages/Readings.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["MenuItems","className","onItemClicked","pagesToShow","principles","to","activeClassName","onClick","id","defaultMessage","description","Menu","props","games","emergency","en","require","crisis_intervention","Objectives","strings","paragraph1","paragraph2","bullet_list","map","list_item","LoggingContext","React","createContext","eventLog","pushEvent","event","this","push","LoggingContextProvider","Provider","value","useLogGameEvent","loggingContext","useContext","userUuid","undefined","useCallback","level","type","target","label","data","game","user","datetime","Date","console","log","Decision","decisionPoint","onOptionChosen","dp","logGameEvent","message","useState","options","randomizedOptions","optionBoxes","useMemo","opt","next","tabIndex","Video","onVideoFinished","videoposition","setVideoposition","subtitlesEnabled","onSubtitlesToggled","location","useLocation","history","useHistory","videoRef","useRef","iframeRef","skipVideo","time","video","vimeo_url","current","api","videojs","dispose","currentTime","useEffect","handleUserKeyPress","e","keyCode","preventDefault","pathname","goBack","paused","play","pause","window","addEventListener","removeEventListener","clip","bufferLength","sources","src","subtitles","kind","srclang","ready","on","duration","doc","document","getElementById","style","display","load","player","Player","setCurrentTime","off","seconds","language","enableTextTrack","disableTextTrack","ref","frameBorder","allow","allowFullScreen","title","Credits","href","rel","Instructions","minSteps","alt","width","height","Feedback","goNext","correctnessIcon","correct","role","tagName","feedback","Settings","fullscreenElement","isFullscreen","setIsFullscreen","handleSubtitlesChange","evt","handleFullscreenChange","exitFullscreen","then","documentElement","requestFullscreen","catch","err","alert","name","checked","onChange","htmlFor","Roboto","default","Font","register","family","format","correctnessColors","half","wrong","correctnessLabels","Summary","gameProgress","decisionPoints","completed","progress","i","find","option","question","answer","length","webrender","tags","br","img","text","children","fontWeight","filter","pdfContent","responses","color","fontFamily","fontSize","lineHeight","backgroundColor","paddingBottom","borderBottom","fileName","blob","url","loading","error","Resources","Transition","playNextVideo","Principles","paragraph","ChartContent","Polaroid","Chart","image","handleClickNext","currentTarget","blur","introCards","isLocalStorageAvailable","str","localStorage","setItem","removeItem","cookies","put","key","maxAge","cookie","get","cname","ca","decodeURIComponent","split","c","charAt","substring","indexOf","remove","VHEStorage","set","getItem","setObject","o","JSON","stringify","getObject","r","parse","useGameState","storageKey","loaded","uuid","d","getTime","performance","now","replace","Math","random","floor","toString","generateUUID","gamesaved","setGamesaved","currentStep","setCurrentStep","setProgress","fullscreen","newGame","selectOption","nextId","ps","Intro","currentMessage","setCurrentMessage","intro","skipToNext","n","DropDown","expanded","setExpanded","toggleExpanded","collapse","baseClassName","Research","Readings","App","onExpandedNavMenuPage","gameData","locale","Error","useGameData","useIntl","gameState","setSubtitlesEnabled","decisionpoints","navMenuExpanded","setNavMenuExpanded","handleMenuToggleButtonClick","lastDecisionPoint","currentDecisionPoint","handleStartNewGame","isIE","documentMode","opr","addons","opera","navigator","userAgent","InstallTrigger","test","HTMLElement","safari","pushNotification","StyleMedia","chrome","webstore","runtime","getBrowser","handleResumeGame","handleHideMenu","handleOptionChosen","handleVideoFinished","colors","menu","path","instructions","objectives","Scenario","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","messages","enMessages","Modal","setAppElement","ReactDOM","render","StrictMode","defaultLocale","basename"],"mappings":"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","file":"static/js/main.d4b28cb4.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Roboto-Regular.a8d6ac03.ttf\";","import { FormattedMessage } from \"react-intl\";\nimport { NavLink } from \"react-router-dom\";\n\ninterface iProps {\n  className?: string;\n  pagesToShow: {\n    principles: boolean;\n  };\n  onItemClicked?: () => void;\n}\n\nconst MenuItems: React.FC<iProps> = ({\n  className,\n  onItemClicked,\n  pagesToShow: { principles: showPrinciples },\n}) => {\n  return (\n    <ul className=\"controls\">\n      <li>\n        <NavLink\n          to={`/instructions/`}\n          className=\"Menu__link\"\n          activeClassName=\"Menu__link--active\"\n          onClick={onItemClicked}\n        >\n          <FormattedMessage\n            id=\"Menu.instructions\"\n            defaultMessage=\"1. How to Play\"\n            description=\"How to Play Button\"\n          />\n        </NavLink>\n      </li>\n\n      <li>\n        <NavLink\n          to={`/objectives/`}\n          className=\"Menu__link\"\n          activeClassName=\"Menu__link--active\"\n          onClick={onItemClicked}\n        >\n          <FormattedMessage\n            id=\"Menu.objectives\"\n            defaultMessage=\"2. Learning Objectives\"\n            description=\"Objectives Button\"\n          />\n        </NavLink>\n      </li>\n      <li>\n        <NavLink\n          to={`/principles/`}\n          className=\"Menu__link\"\n          activeClassName=\"Menu__link--active\"\n          onClick={onItemClicked}\n        >\n          <FormattedMessage\n            id=\"Menu.principles\"\n            defaultMessage=\"3. Essential Principles\"\n            description=\"Principles Button\"\n          />\n        </NavLink>\n      </li>\n      <li>\n        <NavLink\n          to={`/scenario/`}\n          className=\"Menu__link\"\n          activeClassName=\"Menu__link--active\"\n          onClick={onItemClicked}\n        >\n          <FormattedMessage\n            id=\"Menu.scenario\"\n            defaultMessage=\"4. Client Background\"\n            description=\"Client-Background Button\"\n          />\n        </NavLink>\n      </li>\n      <li>\n        <NavLink\n          to={`/chart/`}\n          className=\"Menu__link\"\n          activeClassName=\"Menu__link--active\"\n          onClick={onItemClicked}\n        >\n          <FormattedMessage\n            id=\"Menu.chart\"\n            defaultMessage=\"5. Client Chart\"\n            description=\"Client chart button\"\n          />\n        </NavLink>\n      </li>\n\n      <li>\n        <NavLink\n          to={`/research/`}\n          className=\"Menu__link\"\n          activeClassName=\"Menu__link--active\"\n          onClick={onItemClicked}\n        >\n          <FormattedMessage\n            id=\"Menu.research\"\n            defaultMessage=\"6. Research\"\n            description=\"Research button\"\n          />\n        </NavLink>\n      </li>\n\n      <li>\n        <NavLink\n          to={`/resources/`}\n          className=\"Menu__link\"\n          activeClassName=\"Menu__link--active\"\n          onClick={onItemClicked}\n        >\n          <FormattedMessage\n            id=\"Menu.resources\"\n            defaultMessage=\"7. Resources\"\n            description=\"Resources button\"\n          />\n        </NavLink>\n      </li>\n\n      <li>\n        <NavLink\n          to={`/credits/`}\n          className=\"Menu__link\"\n          activeClassName=\"Menu__link--active\"\n          onClick={onItemClicked}\n        >\n          <FormattedMessage\n            id=\"Menu.credits\"\n            defaultMessage=\"8. Credits\"\n            description=\"Credits Button\"\n          />\n        </NavLink>\n      </li>\n    </ul>\n  );\n};\n\nexport default MenuItems;\n","import MenuItems from \"../components/MenuItems\";\n\nimport \"./Menu.scss\";\n\ninterface iProps {\n  pagesToShow: {\n    principles: boolean;\n  };\n}\n\nconst Menu: React.FC<iProps> = ({ ...props }) => {\n  return (\n    <div className=\"Menu container\">\n      <div className=\"panel menu\">\n        <div className=\"main\">\n          <div className=\"content\">\n            <MenuItems className=\"controls\" {...props} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Menu;\n","import { useMemo } from \"react\";\n\nconst games: Record<string, Record<string, GameDataShape>> = {\n  emergency: {\n    en: require(\"../games/er_game_data.json\"),\n  },\n  crisis_intervention: {\n    en: require(\"../games/suicidal_patient_data.json\"),\n  },\n};\n\nexport type Correctness = \"correct\" | \"half\" | \"wrong\";\n\nexport interface DecisionPoint {\n  id: number;\n  title?: string;\n  type: string; //\"video\" | \"string\",\n  data: string;\n\n  video:\n    | {\n        vimeo_url: string;\n        videojs_url?: string;\n      }\n    | {\n        vimeo_url?: string;\n        videojs_url: string;\n      }\n    | null;\n\n  correct: Correctness;\n  feedback: string;\n  message: string;\n  options: {\n    label: string;\n    next: number;\n  }[];\n  next: null;\n}\n\ninterface GameDataShape {\n  decisionpoints: DecisionPoint[];\n  colors: {\n    \"--theme-light\": string;\n    \"--theme-dark\": string;\n    \"--theme-primary\": string;\n    \"--primary-text-color\": string;\n    \"--link-color\": string;\n  };\n  strings: {\n    menu: {\n      title: string;\n    };\n    intro: {\n      introCards: string[];\n    };\n    objectives: {\n      paragraph1: string;\n      paragraph2: string;\n      bullet_list: string[];\n    };\n    chart: {\n      image: string;\n    };\n    scenario: {\n      introCards: string[];\n    };\n    principles?: {\n      paragraph: string;\n      bullet_list: string[];\n    };\n    instructions: {\n      paragraph: string;\n      bullet_list: string[];\n    };\n\n    resources: {\n      paragraph: string;\n      bullet_list: string[];\n    };\n  };\n}\n\nexport const useGameData = (game: string, locale: string): GameDataShape => {\n  const data = useMemo(\n    () => games[game]?.[locale] || games[game]?.[\"en\"],\n    [game, locale]\n  );\n  if (!data) {\n    throw new Error(\"That game could not be found\");\n  }\n  return data;\n};\n","import { FormattedMessage } from \"react-intl\";\nimport \"./Objectives.scss\";\n\ninterface iProps {\n  strings: {\n    paragraph1: string;\n    paragraph2: string;\n    bullet_list: string[];\n  };\n}\n\nconst Objectives: React.FC<iProps> = ({ strings }) => {\n  return (\n    <div className=\"container\">\n      <div className=\"panel info\">\n        <header>\n          <h2>\n            <FormattedMessage\n              id=\"Objectives.title\"\n              defaultMessage=\"Learning Objectives\"\n              description=\"Learning Objectives title\"\n            />\n          </h2>\n        </header>\n        <div className=\"main\">\n          <div className=\"content cf\">\n            <p>{strings.paragraph1}</p>\n            <p>{strings.paragraph2}</p>\n            <ul>\n              {strings.bullet_list.map((list_item) => (\n                <li>{list_item}</li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Objectives;\n","import React, { useCallback, useContext } from \"react\";\n\ninterface Event {\n  game: string;\n  level: string;\n  type: string;\n  target: string;\n  label?: string;\n  data?: string | number;\n  user?: string;\n  datetime: Date;\n}\n\nconst emptyLoggingContext = () => ({\n  eventLog: [] as Event[],\n  pushEvent(event: Event) {\n    this.eventLog.push(event);\n  },\n});\n\nconst LoggingContext = React.createContext(emptyLoggingContext());\n\nexport const LoggingContextProvider: React.FC = (props) => {\n  return <LoggingContext.Provider value={emptyLoggingContext()} {...props} />;\n};\n\nconst useLogGameEvent = () => {\n  const loggingContext = useContext(LoggingContext);\n  const userUuid = undefined; // useUser().uuid\n\n  function logGameEvent(\n    level: string,\n    type: string,\n    target: string,\n    label?: string,\n    data?: string | number\n  ) {\n    loggingContext.pushEvent({\n      game: \"app.name\",\n      level: level,\n      type: type,\n      target: target,\n      label: label,\n      data: data,\n      user: userUuid,\n      datetime: new Date(),\n    });\n\n    console.log(loggingContext.eventLog);\n  }\n\n  return useCallback(logGameEvent, [loggingContext, userUuid]);\n};\n\nexport default useLogGameEvent;\n","import { useMemo, useState } from \"react\";\nimport { DecisionPoint } from \"../hooks/useGameData\";\nimport useLogGameEvent from \"../hooks/useLogGameEvent\";\nimport \"./Decision.scss\";\n\ninterface iProps {\n  decisionPoint: DecisionPoint;\n  onOptionChosen: (option: number, label: string) => void;\n}\n\nconst Decision: React.FC<iProps> = ({ decisionPoint, onOptionChosen }) => {\n  const logGameEvent = useLogGameEvent();\n\n  const dp = decisionPoint;\n\n  logGameEvent(\"\", \"show\", \"question\", dp.message, \"\");\n\n  const [randomizedOptions] = useState(dp.options); // TODO shuffle these\n\n  const optionBoxes = useMemo(() => {\n    return randomizedOptions.map((opt) => {\n      const chooseOption = () => onOptionChosen(opt.next, opt.label);\n\n      return (\n        <li\n          key={opt.label}\n          className=\"option\"\n          ng-repeat=\"opt in randomizedOptions\"\n        >\n          <button onClick={chooseOption}>{opt.label}</button>\n        </li>\n      );\n    });\n  }, [randomizedOptions, onOptionChosen]);\n\n  // const replayVideo = useCallback(() => {\n  //   /*gtag('event', 'video_replayed', {\n  //     'event_category': 'video',\n  //     'event_label': $scope.dp.data,\n  //     'value': $scope.dp.id\n  //   });*/\n  //   logGameEvent(\"\", \"replay\", \"video\", dp.data, dp.id);\n  //   history.push(`/games/${game_id}/video`);\n  // }, [dp.data, dp.id, history, logGameEvent, game_id]);\n\n  return (\n    <div className=\"container\">\n      <div className=\"question\" tabIndex={0}>\n        <div className=\"vertical_outer\">\n          <div className=\"vertical_inner\">{dp?.message}</div>\n        </div>\n      </div>\n      <ul className=\"option_box cf\">{optionBoxes}</ul>\n    </div>\n  );\n};\n\nexport default Decision;\n","import { useEffect, useCallback, useRef } from \"react\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport videojs from \"video.js\";\nimport Player from \"@vimeo/player\";\n\nimport { DecisionPoint } from \"../hooks/useGameData\";\n\nimport \"./Video.scss\";\nimport useLogGameEvent from \"../hooks/useLogGameEvent\";\n\ninterface iProps {\n  decisionPoint: DecisionPoint;\n  onVideoFinished: () => void;\n  videoposition: number;\n  setVideoposition: (t: number) => void;\n  subtitlesEnabled: boolean;\n  onSubtitlesToggled: (enabled: boolean) => void;\n}\n\nconst Video: React.FC<iProps> = ({\n  decisionPoint: dp,\n  onVideoFinished,\n  videoposition,\n  setVideoposition,\n  subtitlesEnabled,\n  onSubtitlesToggled,\n}) => {\n  const location = useLocation();\n  const history = useHistory();\n  const logGameEvent = useLogGameEvent();\n\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n\n  const skipVideo = useCallback(() => {\n    let time = undefined;\n\n    if (dp?.video?.vimeo_url) {\n    } else if (videoRef.current) {\n      var api = videojs(videoRef.current);\n      api.dispose();\n      time = api?.currentTime();\n    }\n\n    onVideoFinished();\n    logGameEvent(\"\", \"skip\", \"video\", dp?.data, time);\n  }, [dp, logGameEvent, onVideoFinished]);\n\n  useEffect(() => {\n    if (dp && !dp?.video?.vimeo_url) skipVideo();\n  }, [dp, skipVideo]);\n\n  useEffect(() => {\n    const handleUserKeyPress = (e: KeyboardEvent) => {\n      const video = videoRef.current;\n      if (video) {\n        var api = videojs(video);\n        switch (e.keyCode) {\n          case 27:\n            e.preventDefault();\n            if (location.pathname !== \"/\") {\n              if (api && typeof api.currentTime() != \"undefined\") {\n                setVideoposition(api.currentTime());\n              }\n              history.push(`/`);\n            } else {\n              history.goBack();\n            }\n            break;\n          case 32:\n            e.preventDefault();\n            if (api) {\n              if (api.paused()) {\n                api.play();\n              } else {\n                api.pause();\n              }\n            }\n            break;\n          case 33:\n            if (api) {\n              api.currentTime(api.currentTime() - 10);\n              api.play();\n            }\n            break;\n          case 34:\n            if (api) {\n              api.currentTime(api.currentTime() + 10);\n              api.play();\n            }\n            break;\n          default:\n            break;\n        }\n      }\n    };\n    window.addEventListener(\"keydown\", handleUserKeyPress);\n    return () => {\n      window.removeEventListener(\"keydown\", handleUserKeyPress);\n    };\n  }, [history, location.pathname, setVideoposition]);\n\n  useEffect(() => {\n    if (videoRef.current && dp) {\n      const api = videojs(videoRef.current);\n      const clip = {\n        bufferLength: 0,\n        sources: [\n          {\n            type: \"video/mp4\",\n            src: \"_/vid/mp4/\" + dp?.data + \".mp4\",\n          },\n        ],\n        subtitles: [\n          {\n            kind: \"subtitles\",\n            srclang: \"en\",\n            label: \"English\",\n            src: \"_/vid/vtt/en/\" + dp?.data + \".vtt\",\n          },\n        ],\n      };\n      console.log(\"video source\", clip.sources[0].src);\n\n      api.src(clip.sources[0].src);\n\n      // @ts-ignore\n      api.ready((api): void => {\n        if (videoposition > 0) {\n          api.currentTime(videoposition);\n        }\n        api?.play();\n        logGameEvent(\"\", \"start\", \"video\", dp?.data, \"\");\n      });\n\n      api.on(\"progress\", function (e: unknown) {\n        setVideoposition(api.currentTime());\n      });\n\n      api.on(\"pause\", function (e: unknown) {\n        if (api.duration() > api.currentTime() + 0.5) {\n          logGameEvent(\"\", \"pause\", \"video\", dp?.data, api.currentTime());\n        }\n      });\n\n      api.on(\"click\", function togglePause() {\n        var doc = document.getElementById(\"pause\");\n\n        if (api.paused()) {\n          if (doc) {\n            doc.style.display = \"none\";\n          }\n          api.play();\n        } else {\n          if (doc) {\n            doc.style.display = \"block\";\n          }\n          api.pause();\n        }\n      });\n\n      //@ts-ignore\n      api.on(\"ended\", function (e) {\n        skipVideo();\n        logGameEvent(\"\", \"finish\", \"video\", dp?.data, \"\");\n      });\n\n      //@ts-ignore\n      api.on(\"error\", function (e) {\n        console.log(e);\n        logGameEvent(\"\", \"error\", \"video\", dp?.data, \"\");\n      });\n\n      api.load();\n    }\n  }, [dp, skipVideo, logGameEvent, setVideoposition, videoposition]);\n\n  useEffect(() => {\n    if (iframeRef.current) {\n      console.log(\"Setting vimeo listeners\");\n\n      const player = new Player(iframeRef.current);\n      player.on(\"loaded\", () => {\n        player.setCurrentTime(videoposition);\n      });\n      return () => player.off(\"loaded\");\n    }\n    // Disable exhaustive deps so this hook only gets called on initial render\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (iframeRef.current) {\n      console.log(\"Setting vimeo listeners\");\n\n      const player = new Player(iframeRef.current);\n      player.on(\"timeupdate\", (data: { seconds: number }) => {\n        console.log(`Progress ${data.seconds}`);\n        setVideoposition(data.seconds);\n      });\n\n      player.on(\"ended\", () => {\n        console.log(\"vimeo ended\");\n        skipVideo();\n        logGameEvent(\"\", \"finish\", \"video\", dp.data, \"\");\n      });\n\n      player.on(\"texttrackchange\", (data: { language: string | null }) => {\n        onSubtitlesToggled(!!data.language);\n      });\n\n      return () => {\n        player.off(\"timeupdate\");\n        player.off(\"ended\");\n        player.off(\"texttrackchange\");\n      };\n    }\n  }, [setVideoposition, dp.data, logGameEvent, skipVideo, onSubtitlesToggled]);\n\n  useEffect(() => {\n    if (iframeRef.current) {\n      const player = new Player(iframeRef.current);\n      if (subtitlesEnabled) {\n        player.enableTextTrack(\"en\");\n      } else {\n        player.disableTextTrack();\n      }\n    }\n  }, [subtitlesEnabled]);\n\n  return (\n    <div className=\"video\">\n      <div id=\"player\" className=\"videoplayer functional\">\n        {dp?.video &&\n          (dp.video.vimeo_url ? (\n            <iframe\n              ref={iframeRef}\n              // style={{height: (iframeRef.current?.scrollWidth ?? 600) * 9/16}}\n              src={dp.video.vimeo_url + `?autoplay=1`}\n              frameBorder={0}\n              allow=\"autoplay; texttrack; fullscreen; picture-in-picture\"\n              allowFullScreen\n              title=\"SG4_DP1_0\"\n            ></iframe>\n          ) : (\n            <video\n              ref={videoRef}\n              id=\"vid-player\"\n              className=\"video-js vjs-big-play-centered\"\n            >\n              Please use a different browser\n            </video>\n          ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Video;\n","import { FormattedMessage } from \"react-intl\";\nimport \"./Credits.scss\";\n\nconst Credits: React.FC<{}> = () => {\n  return (\n    <div className=\"container\">\n      <div className=\"panel credits\">\n        <header>\n          <h2>\n            <FormattedMessage\n              id=\"Credits.title\"\n              defaultMessage=\"Credits\"\n              description=\"credits title\"\n            />\n          </h2>\n        </header>\n        <div className=\"main\">\n          <div className=\"content cf\">\n            <div className=\"credits-content\">\n              <h3>Funding</h3>\n              <p>\n                This project is made possible with funding by the Government of\n                Ontario and the Virtual Learning Strategy. To learn more about\n                the Virtual Learning Strategy visit{\" \"}\n                <span>\n                  <a\n                    href=\"https://vls.ecampusontario.ca/\"\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                  >\n                    vls.ecampusontario.ca\n                  </a>\n                </span>\n                {\". \"}\n              </p>\n\n              <h3>Research Project Manager</h3>\n              <ul>\n                <li>\n                  <span className=\"person\">\n                    Roxanne Ramjattan, PhD, MSW, RSW\n                  </span>\n                </li>\n              </ul>\n\n              <h3>Virtual Gaming Simulation Consultant</h3>\n              <ul>\n                <li>\n                  <span className=\"person\">Margaret Verkuyl, NP, PHC, MN</span>\n                </li>\n                <span className=\"title\">\n                  Professor <br />\n                </span>\n                <span className=\"organization\">Nursing Centennial College</span>\n              </ul>\n\n              <h3>Cast</h3>\n              <ul>\n                <li>Michael Jenkins (Therapist, Marcus)</li>\n                <li>Catherine Ouimet (Client, Kelly)</li>\n                <li>Cintra Ramkissoon (Friend, Talia)</li>\n              </ul>\n\n              <h3>Film Producer</h3>\n              <ul>\n                <li>Ryan Marley</li>\n              </ul>\n\n              <h3>Editor</h3>\n              <ul>\n                <li>Guino Anderson</li>\n              </ul>\n\n              <h3>Website Designer</h3>\n              <ul>\n                <li>Lucas Michalski</li>\n              </ul>\n\n              <h3>Research Assistants</h3>\n              <h4>Winter 2021</h4>\n              <ul>\n                <li>Grace (Jasper) Bakker </li>\n                <li>Jen Humber </li>\n                <li>Ivan Lange </li>\n                <li>Sophia Miller </li>\n                <li>Cintra Ramkissoon </li>\n              </ul>\n              <h4>Summer 2021</h4>\n              <ul>\n                <li>Daniella Antongiovanni </li>\n                <li>Damon Dam </li>\n                <li>Sandrine Bendavid </li>\n                <li>Tiffani Lucas </li>\n                <li>Megan Williams</li>\n              </ul>\n              <h4>Fall 2021</h4>\n              <ul>\n                <li>Daniella Antongiovanni </li>\n                <li>Damon Dam </li>\n                <li>Sandrine Bendavid </li>\n                <li>Tiffani Lucas </li>\n              </ul>\n\n              <h3>Advisory Committee</h3>\n              <ul>\n                <li>\n                  <span className=\"person\">Maris Karklins</span>\n                </li>\n                <span className=\"title\">\n                  Assistive Technologist, Counselling and Accessibility Services{\" \"}\n                  <br />\n                </span>\n                <span className=\"organization\">Seneca College</span>\n\n                <li>\n                  <span className=\"person\">Erica Watson, MSW, RSW</span>\n                </li>\n                <span className=\"title\">\n                  Clinical Supervisor & Educational Coordinator <br />\n                </span>\n                <span className=\"organization\">\n                  SickKids Centre | Garry Hurvitz Center for Community Mental\n                  Health\n                </span>\n\n                <li>\n                  <span className=\"person\">Seemab Mushtaq, BA</span>\n                </li>\n                <span className=\"title\">\n                  Crisis Worker <br />\n                </span>\n                <span className=\"organization\">\n                  Distress Centre of Greater Toronto\n                </span>\n\n                <li>\n                  <span className=\"person\">\n                    Rebecca Oliveira, RN, BScN, CPMHN\n                  </span>\n                </li>\n                <span className=\"title\">\n                  Nurse Educator <br />\n                </span>\n                <span className=\"organization\">\n                  Center for Addiction and Mental Health\n                </span>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Credits;\n","import \"./Instructions.scss\";\n\ninterface iProps {\n  minSteps: number;\n  strings: {\n    paragraph: string;\n    bullet_list: string[];\n  };\n}\n\nconst Instructions: React.FC<iProps> = ({ minSteps, strings }) => {\n  return (\n    <div className=\"container\">\n      <div className=\"panel info\">\n        <header>\n          <h2>Introduction</h2>\n          <div>\n            This virtual gaming simulation is focused on using the best\n            practices for working with a suicidal client. The simulation was\n            generously funded by eCampusOntario.\n          </div>\n        </header>\n\n        <div className=\"main\">\n          <h2>How to Play</h2>\n          <div className=\"content cf\">\n            <ul>\n              <li>\n                Watch interactions between Kelly and the mental health\n                counsellor.\n              </li>\n              <li>\n                Following each interaction, you will be asked to select the most\n                appropriate response. Possible responses are classified as:\n                {\"  \"}\n                <img\n                  src=\"/images/icon-correct.png\"\n                  alt=\"green circular checkmark icon\"\n                  width=\"20\"\n                  height=\"20\"\n                ></img>{\" \"}\n                Correct,{\" \"}\n                <img\n                  src=\"/images/icon-partial.png\"\n                  alt=\"yellow triangular warning icon\"\n                  width=\"20\"\n                  height=\"20\"\n                ></img>{\" \"}\n                Not-the-Best, and{\" \"}\n                <img\n                  src=\"/images/icon-incorrect.png\"\n                  alt=\"red circular x icon\"\n                  width=\"20\"\n                  height=\"20\"\n                ></img>{\" \"}\n                Incorrect.\n              </li>\n              <li>\n                You can repeat this game numerous times for practice and to\n                improve your responses.\n              </li>\n              <li>\n                The game can be paused and resumed at any time by leaving the\n                game and returning to this page.\n              </li>\n              <li>\n                At the end of the game you will see a summary report with links\n                to the suggested module readings.\n              </li>\n              <li>This game has sound. Adjust your volume accordingly.</li>\n              <li>\n                The game makes use of high-resolution videos, which require\n                high-speed Internet.\n              </li>\n              <li>The game will take 30-60 minutes to complete.</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Instructions;\n","import { useCallback, useMemo } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { useHistory } from \"react-router\";\nimport { DecisionPoint } from \"../hooks/useGameData\";\nimport \"./Feedback.scss\";\n\ninterface iProps {\n  decisionPoint: DecisionPoint;\n}\n\nconst Feedback: React.FC<iProps> = ({ decisionPoint: dp }) => {\n  const history = useHistory();\n\n  const goNext = useCallback(() => {\n    switch (dp?.type) {\n      case \"video\":\n        history.push(`/decision/`);\n        break;\n      case \"lo\":\n        history.push(`/lo/`);\n        break;\n    }\n  }, [dp?.type, history]);\n\n  const correctnessIcon = useMemo(() => {\n    switch (dp?.correct) {\n      case \"half\":\n        return (\n          <>\n            <img\n              src=\"/images/icon-partial.png\"\n              alt=\"yellow triangular warning icon\"\n              width=\"20\"\n              height=\"20\"\n            ></img>\n            &nbsp;<span>Not-the-Best</span>\n          </>\n        );\n      case \"wrong\":\n        return (\n          <>\n            <img\n              src=\"/images/icon-incorrect.png\"\n              alt=\"red circular x icon\"\n              width=\"20\"\n              height=\"20\"\n            ></img>\n            &nbsp;<span>Incorrect</span>\n          </>\n        );\n    }\n  }, [dp?.correct]);\n\n  return (\n    <div className=\"container\">\n      <div className=\"panel feedback\" role=\"alert\">\n        <div>\n          <FormattedMessage\n            id=\"Feedback.title\"\n            defaultMessage=\"Feedback\"\n            description=\"feedback title\"\n            tagName=\"h2\"\n          />\n          {correctnessIcon}\n          <div className=\"main\">{dp?.feedback}</div>\n        </div>\n        <footer>\n          <p className=\"controls\">\n            <button className=\"button\" onClick={goNext}>\n              <FormattedMessage\n                id=\"General.resume\"\n                defaultMessage=\"Resume Game\"\n                description=\"resume game button\"\n              />\n            </button>\n          </p>\n        </footer>\n      </div>\n    </div>\n  );\n};\n\nexport default Feedback;\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport \"./Settings.scss\";\n\ninterface iProps {\n  subtitlesEnabled: boolean;\n  onSubtitlesToggled: (enabled: boolean) => void;\n}\n\nconst Settings: React.FC<iProps> = ({\n  subtitlesEnabled,\n  onSubtitlesToggled,\n}) => {\n  const [isFullscreen, setIsFullscreen] = useState<boolean>(\n    !!document.fullscreenElement\n  );\n\n  const handleSubtitlesChange = useCallback(\n    (evt: React.ChangeEvent<HTMLInputElement>) => {\n      onSubtitlesToggled(evt.target.value === \"on\");\n    },\n    [onSubtitlesToggled]\n  );\n\n  const handleFullscreenChange = useCallback(\n    (evt: React.ChangeEvent<HTMLInputElement>) => {\n      if (!document.fullscreenElement && evt.target.value === \"on\") {\n        document.documentElement\n          .requestFullscreen()\n          .then(() => setIsFullscreen(true))\n          .catch((err) => {\n            alert(\n              `Error attempting to enable full-screen mode: ${err.message} (${err.name})`\n            );\n          });\n      } else if (document.fullscreenElement && evt.target.value === \"off\") {\n        if (document.exitFullscreen) {\n          document.exitFullscreen().then(() => setIsFullscreen(false));\n        }\n      }\n    },\n    []\n  );\n\n  useEffect(() => {\n    const handleFullscreenChange = () => {\n      // document.fullscreenElement will point to the element that\n      // is in fullscreen mode if there is one. If there isn't one,\n      // the value of the property is null.\n      setIsFullscreen(!!document.fullscreenElement);\n      if (document.fullscreenElement) {\n        console.log(\n          `Element: ${document.fullscreenElement.id} entered full-screen mode.`\n        );\n      } else {\n        console.log(\"Leaving full-screen mode.\");\n      }\n    };\n    document.addEventListener(\"fullscreenchange\", handleFullscreenChange);\n\n    return () =>\n      document.removeEventListener(\"fullscreenchange\", handleFullscreenChange);\n  }, []);\n\n  return (\n    <div className=\"Settings container\">\n      <div className=\"panel Settings__panel\">\n        <header>\n          <h2>Game Options</h2>\n        </header>\n        <div className=\"main\">\n          <div className=\"content\">\n            <div className=\"Settings__item\">\n              <h2>Display:</h2>\n              <div className=\"radio\">\n                <div>\n                  <input\n                    type=\"radio\"\n                    name=\"display_mode\"\n                    id=\"mode_window\"\n                    value=\"off\"\n                    checked={!isFullscreen}\n                    onChange={handleFullscreenChange}\n                  />\n                  <label htmlFor=\"mode_window\" aria-checked={!isFullscreen}>\n                    Window\n                  </label>\n                </div>\n                <div>\n                  <input\n                    type=\"radio\"\n                    name=\"display_mode\"\n                    id=\"mode_fullscreen\"\n                    value=\"on\"\n                    checked={isFullscreen}\n                    onChange={handleFullscreenChange}\n                  />\n                  <label htmlFor=\"mode_fullscreen\" aria-checked={isFullscreen}>\n                    Fullscreen\n                  </label>\n                </div>\n              </div>\n            </div>\n            <br />\n            <div className=\"Settings__item\">\n              <h2>Subtitles:</h2>\n              <div className=\"radio\">\n                <div>\n                  <input\n                    type=\"radio\"\n                    name=\"subtitles\"\n                    id=\"subtitles_off\"\n                    value=\"off\"\n                    checked={!subtitlesEnabled}\n                    onChange={handleSubtitlesChange}\n                  />\n                  <label\n                    htmlFor=\"subtitles_off\"\n                    aria-checked={!subtitlesEnabled}\n                  >\n                    Off\n                  </label>\n                </div>\n                <div>\n                  <input\n                    type=\"radio\"\n                    name=\"subtitles\"\n                    id=\"subtitles_en\"\n                    value=\"on\"\n                    checked={subtitlesEnabled}\n                    onChange={handleSubtitlesChange}\n                  />\n                  <label htmlFor=\"subtitles_en\" aria-checked={subtitlesEnabled}>\n                    On\n                  </label>\n                </div>\n              </div>\n            </div>\n            {/* <!--<br>\n\t\t\t\t<div className=\"cf\">\n\t\t\t\t\t<h2>Video Quality:</h2>\n\t\t\t\t\t<div className=\"radio\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input type=\"radio\" name=\"quality\" id=\"quality_720p\"\n\t\t\t\t\t\t\t\tng-model=\"sg.quality\"\n\t\t\t\t\t\t\t\tng-value=\"'-720p'\"\n\t\t\t\t\t\t\t\tng-change=\"saveState()\"/> \n\t\t\t\t\t\t\t<label for=\"quality_720p\">High (720p)</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input type=\"radio\" name=\"quality\" id=\"quality_360p\"\n\t\t\t\t\t\t\t\tng-model=\"sg.quality\"\n\t\t\t\t\t\t\t\tng-value=\"''\"\n\t\t\t\t\t\t\t\tng-change=\"saveState()\"/> \n\t\t\t\t\t\t\t<label for=\"quality_360p\">Low (360p)</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>--> */}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Settings;\n","import React, { useMemo } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport \"./Summary.scss\";\nimport {\n  PDFDownloadLink,\n  Document,\n  Page,\n  Image,\n  Text,\n  View,\n} from \"@react-pdf/renderer\";\nimport { Font } from \"@react-pdf/renderer\";\n\nimport { Link as Lonk } from \"react-router-dom\";\nimport { Correctness, DecisionPoint } from \"../hooks/useGameData\";\n\nconst Roboto = require(\"../fnt/Roboto-Regular.ttf\").default as string;\n\nFont.register({\n  family: \"Roboto\",\n  format: \"truetype\",\n  src: Roboto,\n});\n\ninterface iProps {\n  decisionPoints: DecisionPoint[];\n  gameProgress: { id: number; label: string; option: number }[];\n  completed: boolean;\n}\n\nconst correctnessColors: { [key in Correctness]: string } = {\n  correct: \"#009933\",\n  half: \"#808080\",\n  wrong: \"cc0000\",\n};\n\nconst correctnessLabels: { [key in Correctness]: string } = {\n  correct: \"CORRECT\",\n  half: \"PARTIALLY-CORRECT\",\n  wrong: \"INCORRECT\",\n};\n\nconst Summary: React.FC<iProps> = ({\n  gameProgress,\n  decisionPoints,\n  completed,\n}) => {\n  // const [progress, setProgress] = useState([])\n\n  let progress: { question: string; answer: string; correct: Correctness }[] =\n    useMemo(() => {\n      let progress = [];\n      var i;\n      for (i = 0; i < gameProgress.length; i++) {\n        const dp = gameProgress[i];\n        const current = decisionPoints.find(({ id }) => id === dp.id)!;\n        const next = decisionPoints.find(({ id }) => id === dp.option)!;\n\n        progress.push({\n          question: current.message,\n          answer: dp.label,\n          correct: next.correct,\n        });\n      }\n      return progress;\n    }, [decisionPoints, gameProgress]);\n\n  let message: (webrender: boolean) => JSX.Element;\n\n  if (completed) {\n    message = (webrender) => {\n      const tags = webrender\n        ? {\n            br: () => <br />,\n            img: ({\n              alt,\n              ...props\n            }: React.ImgHTMLAttributes<HTMLImageElement> & { alt: string }) => (\n              <img alt={alt} {...props} />\n            ),\n            text: ({\n              style,\n              children,\n            }: React.HTMLAttributes<HTMLSpanElement> &\n              React.ComponentProps<typeof Text>) => (\n              <span style={style}>{children}</span>\n            ),\n          }\n        : {\n            br: () => <>{\"\\n\"}</>,\n            img: ({ src }: React.ImgHTMLAttributes<HTMLImageElement>) => (\n              <Image src={src}></Image>\n            ),\n            text: ({\n              style,\n              children,\n            }: React.HTMLAttributes<HTMLSpanElement> &\n              React.ComponentProps<typeof Text>) => (\n              <Text style={style}>{children}</Text>\n            ),\n          };\n\n      return (\n        <>\n          <tags.text>\n            You have completed the game by answering{\" \"}\n            <tags.text style={{ fontWeight: \"bold\" }}>\n              {\" \"}\n              {progress.length} questions\n            </tags.text>\n            .\n          </tags.text>\n          {progress.length ===\n          decisionPoints.filter(({ correct }) => correct === \"correct\")\n            .length ? (\n            <tags.text>\n              You've demonstrated the best possible result! Now play it one more\n              time to make sure it wasn't mere luck :)\n            </tags.text>\n          ) : (\n            <tags.text>\n              <tags.text>\n                {\" \"}\n                However, if you give only correct answers it should only take 11\n                questions to complete the scenario. Your selections had the\n                following results:\n                <tags.br />\n                <tags.img\n                  src=\"/images/icon-correct.png\"\n                  alt=\"green circular checkmark icon\"\n                  width=\"20\"\n                  height=\"20\"\n                />{\" \"}\n                Correct:{\" \"}\n                {progress.filter(({ correct }) => correct === \"correct\").length}\n                <tags.br />\n                <tags.img\n                  src=\"/images/icon-partial.png\"\n                  alt=\"yellow triangular warning icon\"\n                  width=\"20\"\n                  height=\"20\"\n                />{\" \"}\n                Not-the-Best:{\" \"}\n                {progress.filter(({ correct }) => correct === \"half\").length}\n                <tags.br />\n                <tags.img\n                  src=\"/images/icon-incorrect.png\"\n                  alt=\"red circular x icon\"\n                  width=\"20\"\n                  height=\"20\"\n                />{\" \"}\n                Incorrect:{\" \"}\n                {progress.filter(({ correct }) => correct === \"wrong\").length}\n                <tags.br />\n              </tags.text>\n\n              <tags.text>\n                See if you can improve your results next time!{\" \"}\n              </tags.text>\n            </tags.text>\n          )}\n          {/* <Text>\n          Document this encounter by clicking on the practice documentation\n          icon. There you will find a blank documentation form. Once you are\n          done, compare your documentation to the sample provided.{\" \"}\n        </Text>\n        <Text>\n          If not attending an organized debrief, make sure you download and\n          complete the{\" \"}\n          <Link src={`${window.location.origin}/docs/self-assessment.pdf`}>\n            self-debriefing questions\n          </Link>{\" \"}\n          to optimise your learning experience. Scroll down to view results.\n        </Text> */}\n        </>\n      );\n    };\n  } else {\n    message = () => (\n      <Text>\n        You have answered{\" \"}\n        <Text style={{ fontWeight: \"bold\" }}> {progress.length} questions</Text>\n        . To finish the game go to menu and resume the gameplay.\n      </Text>\n    );\n  }\n\n  const pdfContent = useMemo(() => {\n    let responses = progress.map((dp, i) => (\n      <View key={i}>\n        <View>\n          <Text style={{ fontWeight: \"bold\" }}>Q: </Text>\n          <Text>{dp.question}</Text>\n        </View>\n        <View>\n          <Text style={{ fontWeight: \"bold\" }}>A: </Text>\n          <Text style={{ color: correctnessColors[dp.correct] }}>\n            {dp.answer} ({correctnessLabels[dp.correct]})\n          </Text>\n        </View>\n      </View>\n    ));\n    const html = (\n      <Document>\n        <Page>\n          {/* <style\n            dangerouslySetInnerHTML={{\n              __html: `html, body { font-family: Helvetica, Arial, sans-serif; font-size: 14px; line-height: 130%; background-color: #ffffff; color: #000;}\n\t\t\t\t\t\t\th1, h2, p, ol { font-weight: normal; margin-top: 0.3em; margin-bottom: 0.3em; padding-top: 0; padding-bottom: 0; line-height: 130%; color: #000; }`,\n            }}\n          /> */}\n          <View\n            style={{\n              fontFamily: \"Roboto\",\n              fontSize: 14,\n              lineHeight: \"130%\",\n              backgroundColor: \"#ffffff\",\n              color: \"#000\",\n            }}\n          >\n            <Text\n              style={{\n                fontSize: 32,\n                paddingBottom: \"0.3em\",\n                borderBottom: \"2px solid #000000\",\n              }}\n            >\n              Emergency Game Report\n            </Text>\n            <Text style={{ fontSize: 24 }}>Summary</Text>\n            <View>{message(false)}</View>\n            <Text style={{ fontSize: 24 }}>Your Responses</Text>\n            <View>{responses}</View>\n          </View>\n        </Page>\n      </Document>\n    );\n    return html;\n  }, [message, progress]);\n\n  return (\n    <div className=\"container\">\n      <div className=\"panel info\">\n        <header>\n          <FormattedMessage\n            id=\"Summary.title\"\n            defaultMessage=\"Congratulations!\"\n            description=\"Summary title\"\n            tagName=\"h2\"\n          />\n        </header>\n        <div className=\"main summary\">\n          <div className=\"content\">\n            <div>{message(true)}</div>\n            <h2 style={{ fontSize: 24 }}>Your Answers:</h2>\n            <ol className=\"responses\">\n              {progress.map((dp) => (\n                <li>\n                  <div>{dp.question}</div>\n                  <div className={dp.correct}>\n                    <strong style={{ color: correctnessColors[dp.correct] }}>\n                      {dp.answer} ({correctnessLabels[dp.correct]})\n                    </strong>\n                  </div>\n                </li>\n              ))}\n            </ol>\n          </div>\n        </div>\n        <footer>\n          <PDFDownloadLink\n            className=\"button\"\n            document={pdfContent}\n            fileName=\"emergency-progress.pdf\"\n          >\n            {({ blob, url, loading, error }) =>\n              loading ? \"Loading document...\" : \"Download Progress Report\"\n            }\n          </PDFDownloadLink>\n\n          <Lonk to=\"/materials/\">\n            <FormattedMessage\n              id=\"materials.link\"\n              defaultMessage=\"Practice Materials\"\n              description=\"Link to Practice Materials\"\n            />\n          </Lonk>\n\n          {/* <a href=\"/module/_/ui/game/tpl/materials.html\" className=\"button\">\n            {\" \"}\n            Practice Documentation{\" \"}\n          </a> */}\n        </footer>\n      </div>\n    </div>\n  );\n};\n\nexport default Summary;\n","import { FormattedMessage } from \"react-intl\";\n\nconst Resources: React.FC<{}> = () => {\n  return (\n    <div className=\"container\">\n      <div className=\"panel credits\">\n        <header>\n          <h2>\n            <FormattedMessage\n              id=\"Resources.title\"\n              defaultMessage=\"Resources\"\n              description=\"resources title\"\n            />\n          </h2>\n        </header>\n        <div className=\"main\">\n          <div className=\"content cf\">\n            <ul>\n              <h2>Canada</h2>\n\n              <li>\n                <span>\n                  Crisis Services Canada <br />\n                </span>\n                <span>\n                  Website: https://www.crisisservicescanada.ca/en/ <br />\n                </span>\n                <span>Telephone: 1-833-456-4566 </span>\n              </li>\n\n              <li>\n                <span>\n                  Kids Help Phone <br />\n                </span>\n                <span>\n                  Website: https://kidshelpphone.ca/urgent-help\n                  <br />\n                </span>\n                <span>Telephone: 1-800-668-6868 </span>\n              </li>\n\n              <h2>Ontario, Canada</h2>\n\n              <li>\n                <span>\n                  Distress Centres of Greater Toronto <br />\n                </span>\n                <span>\n                  Website:\n                  https://www.dcogt.com/canada-suicide-prevention-service <br />\n                </span>\n                <span>Telephone: 416-408-HELP (4357) </span>\n              </li>\n\n              <li>\n                <span>\n                  {\" \"}\n                  Gerstein Centre <br />\n                </span>\n                <span>\n                  {\" \"}\n                  Website: https://gersteincentre.org/ <br />\n                </span>\n                <span> Telephone: 416-929-5200 </span>\n              </li>\n\n              <h2>United States</h2>\n\n              <li>\n                <span>\n                  {\" \"}\n                  National Suicide Prevention Lifeline <br />\n                </span>\n                <span>\n                  {\" \"}\n                  Website: https://suicidepreventionlifeline.org/ <br />\n                </span>\n                <span> Telephone: 1-800-273-8255 </span>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Resources;\n","import { useCallback } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { useHistory } from \"react-router\";\nimport { DecisionPoint } from \"../hooks/useGameData\";\nimport \"./Transition.scss\";\n\ninterface iProps {\n  decisionPoint: DecisionPoint;\n}\n\nconst Transition: React.FC<iProps> = ({ decisionPoint: dp }) => {\n  const history = useHistory();\n\n  const playNextVideo = useCallback(() => {\n    history.push(`/video/`);\n  }, [history]);\n\n  return (\n    <div className=\"container\">\n      <div className=\"panel feedback\">\n        <header>\n          <FormattedMessage\n            id=\"Transition.title\"\n            defaultMessage=\"Game Paused\"\n            description=\"game paused transition title\"\n            tagName=\"h2\"\n          />\n        </header>\n        <div className=\"main\">{dp?.feedback}</div>\n        <footer>\n          <p className=\"controls\">\n            <button className=\"Link\" onClick={playNextVideo}>\n              Resume Game\n            </button>\n          </p>\n        </footer>\n      </div>\n    </div>\n  );\n};\n\nexport default Transition;\n","import { FormattedMessage } from \"react-intl\";\nimport \"./Principles.scss\";\n\ninterface iProps {\n  strings: {\n    paragraph: string;\n    bullet_list: string[];\n  };\n}\n\nconst Principles: React.FC<iProps> = ({ strings }) => {\n  return (\n    <div className=\"container\">\n      <div className=\"panel info\">\n        <header>\n          <h2>\n            <FormattedMessage\n              id=\"Principles.title\"\n              defaultMessage=\"Essential Principles\"\n              description=\"Principles title\"\n            />\n          </h2>\n        </header>\n        <div className=\"main\">\n          <div className=\"content cf\">\n            <p>{strings.paragraph}</p>\n            <ul>\n              {strings.bullet_list.map((list_item) => (\n                <li>{list_item}</li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Principles;\n","import \"./ChartContent.scss\";\n\nconst ChartContent: React.FC = () => {\n  return (\n    <div className=\"ChartContent\">\n      <div className=\"Chart-title\">\n        <h2>Drop-in Visit</h2>\n        <h3>Client Form</h3>\n      </div>\n\n      <div className=\"Chart-basic-info\">\n        <div className=\"Chart-basic-left-column\">\n          <div>Name: Flynn, Kelly</div>\n          <div>Appointment Date: 2021-11-10</div>\n        </div>\n        <div className=\"Chart-basic-left-column\">\n          <div>Referral #: 23458K0</div>\n        </div>\n      </div>\n\n      <hr></hr>\n\n      <div className=\"Chart-address\">\n        <div className=\"Chart-address-left-column\">\n          <div>Address: 122 Bedford Road</div>\n          <div>Province: Ontario</div>\n        </div>\n        <div className=\"Chart-address-right-column\">\n          <div>City: Toronto</div>\n          <div>Postal Code: MQR 092</div>\n        </div>\n      </div>\n\n      <hr></hr>\n\n      <div className=\"Chart-client-profile\">\n        <h3>Client Profile</h3>\n        <div className=\"Chart-profile-columns\">\n          <div>Sex: Female</div>\n          <div>DOB: 1998-10-14</div>\n          <div>Age: 22</div>\n        </div>\n      </div>\n\n      <hr></hr>\n\n      <div className=\"Chart-presenting-problems\">\n        <p>\n          Presenting Challenges: Kellys friend Talia brought her to the clinic\n          after booking an appointment. Talia has concerns about Kellys\n          wellbeing and recent behaviours. (updated note from previous session\n          date)\n        </p>\n      </div>\n\n      <hr></hr>\n\n      <div className=\"Chart-languages\">\n        <div>Language(s) Spoken: English</div>\n        <div>Preferred Language: English</div>\n      </div>\n\n      <hr></hr>\n\n      <div className=\"Chart-key-info\">\n        <h3>Key Assessment Information</h3>\n        <ul>\n          <li>History of suicide attempt</li>\n          <li>Current issue with alcohol consumption</li>\n          <li>Feelings of anxiousness and depression</li>\n          <li>Isolation from friends and family</li>\n          <li>Not performing as well as usual in school</li>\n          <li>High expectations for herself regarding school</li>\n          <li>Initial family support was unsteady</li>\n          <li>Currently living with her friend Talia</li>\n        </ul>\n      </div>\n\n      <hr></hr>\n\n      <div className=\"Chart-footer\">\n        <div>Appointment With: Marcus Jackson, Drop-In Clinic Counsellor</div>\n        <div>Unit Extension: 5643</div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChartContent;\n","import \"./Polaroid.scss\";\n\nconst Polaroid: React.FC = () => {\n  return (\n    <div className=\"polaroid rotate_right\">\n      <img\n        src=\"/images/patient-photo-cropped.jpg\"\n        alt=\"Caucasian patient sitting and looking at the camera\"\n        width=\"280\"\n        height=\"210\"\n      ></img>\n      <p className=\"caption\">Client: Kelly FLynn</p>\n    </div>\n  );\n};\n\nexport default Polaroid;\n","// import { useCallback, useState } from \"react\";\n// import Modal from \"react-modal\";\nimport { useCallback } from \"react\";\nimport { useHistory } from \"react-router\";\nimport ChartContent from \"../components/ChartContent\";\nimport Polaroid from \"../components/Polaroid\";\n\nimport \"./Chart.scss\";\n\ninterface iProps {\n  image: string;\n}\n\n// const customStyles = {\n//   overlay: { zIndex: 1000 },\n// };\n\nconst Chart: React.FC<iProps> = ({ image }) => {\n  // const [modalIsOpen, setIsOpen] = useState(false);\n\n  // const closeModal = useCallback(() => {\n  //   setIsOpen(false);\n  // }, []);\n\n  // const openModal = useCallback(() => {\n  //   setIsOpen(true);\n  // }, []);\n\n  const history = useHistory();\n\n  const handleClickNext = useCallback(\n    (evt: React.MouseEvent<HTMLButtonElement>) => {\n      evt.currentTarget.blur();\n\n      history.push(`/intro/`);\n    },\n    [history]\n  );\n\n  return (\n    <>\n      {/* <Modal\n        className=\"ChartModal\"\n        isOpen={modalIsOpen}\n        //onAfterOpen={afterOpenModal}\n        onRequestClose={closeModal}\n        style={customStyles}\n        contentLabel=\"Patient Chart\"\n      >\n        <img\n          className=\"chart\"\n          onClick={closeModal}\n          src=\"/images/chart_image.png\"\n          alt=\"Client's Chart with some background information for this visit\"\n        />\n        <button onClick={closeModal}>CLOSE</button>\n      </Modal> */}\n      <div className=\"Chart container\">\n        <div className=\"Chart__panel panel info\">\n          <header>\n            <h2>Client Chart</h2>\n          </header>\n          <div className=\"Chart-folder\">\n            <div className=\"Chart-folder-left\">\n              <Polaroid></Polaroid>\n            </div>\n            <div className=\"Chart-folder-right\">\n              <ChartContent></ChartContent>\n            </div>\n          </div>\n        </div>\n        <button className=\"next-button\" onClick={handleClickNext}>\n          Next\n        </button>\n      </div>\n    </>\n  );\n};\n\nexport default Chart;\n\n// function logGameEvent(arg0: string, arg1: string, arg2: string, arg3: any, arg4: string) {\n//   throw new Error(\"Function not implemented.\");\n// }\n","import { FormattedMessage } from \"react-intl\";\nimport \"./Objectives.scss\";\n\ninterface iProps {\n  strings: {\n    introCards: string[];\n  };\n}\n\nconst Objectives: React.FC<iProps> = ({ strings }) => {\n  return (\n    <div className=\"container\">\n      <div className=\"panel info\">\n        <header>\n          <h2>\n            <FormattedMessage\n              id=\"Scenario.title\"\n              defaultMessage=\"Background and Scenario\"\n              description=\"Scenario title\"\n            />\n          </h2>\n        </header>\n        <div className=\"main\">\n          <div className=\"content cf\">\n            <ul>\n              {strings.introCards.map((list_item) => (\n                <li>{list_item}</li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Objectives;\n","//////////////////////////////////////////////////\n// Cookies + State, it's messy here\n//////////////////////////////////////////////////\n\nvar maxAge = 21 * 24 * 60;\n\nfunction isLocalStorageAvailable() {\n  var str = \"test\";\n  try {\n    localStorage.setItem(str, str);\n    localStorage.removeItem(str);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nconst cookies = {\n  put(key: string, value: string, maxAge: number) {\n    var cookie = `${key}=${value};path=/;max-age=${maxAge};`;\n    console.log(cookie);\n    document.cookie = cookie;\n  },\n  get(cname: string): string | null {\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(\";\");\n    for (let i = 0; i < ca.length; i++) {\n      let c = ca[i];\n      while (c.charAt(0) === \" \") {\n        c = c.substring(1);\n      }\n      if (c.indexOf(name) === 0) {\n        return c.substring(name.length, c.length);\n      }\n    }\n    return null;\n  },\n  remove(key: string) {\n    this.put(key, \"\", -1);\n  },\n};\n\nexport const VHEStorage = {\n  set: function (key: string, value: string) {\n    if (isLocalStorageAvailable()) {\n      window.localStorage.setItem(key, value);\n    } else {\n      cookies.put(key, value, maxAge);\n    }\n  },\n  get: function (key: string): string | null {\n    var r = isLocalStorageAvailable()\n      ? window.localStorage.getItem(key)\n      : cookies.get(key);\n    return r;\n  },\n  setObject: function (key: string, value: any) {\n    const o = JSON.stringify(value);\n    if (isLocalStorageAvailable()) {\n      window.localStorage.setItem(key, o);\n    } else {\n      cookies.put(key, o, maxAge);\n    }\n  },\n  getObject: function (key: string) {\n    var r = isLocalStorageAvailable()\n      ? window.localStorage.getItem(key)\n      : cookies.get(key);\n    return r ? JSON.parse(r) : false;\n  },\n  remove: function (key: string) {\n    if (isLocalStorageAvailable()) {\n      window.localStorage.removeItem(key);\n    } else {\n      cookies.remove(key);\n    }\n  },\n};\n\nconst useStorage = () => {\n  return VHEStorage;\n};\n\nexport default useStorage;\n","import { VHEStorage } from \"./useStorage\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { generateUUID } from \"../util\";\n\ninterface iGameSave {\n  uuid: string;\n  gamesaved: boolean;\n  subtitles: boolean;\n  fullscreen: boolean;\n  currentStep: number;\n  videoposition: number;\n  progress: {\n    id: number;\n    label: string;\n    option: number;\n  }[];\n}\n\nconst useGameState = (storageKey: string) => {\n  const [loaded] = useState(\n    VHEStorage.getObject(storageKey) as iGameSave | null\n  );\n\n  const [uuid] = useState(loaded?.uuid ?? generateUUID());\n  const [gamesaved, setGamesaved] = useState(loaded?.gamesaved ?? false);\n  const [currentStep, setCurrentStep] = useState(loaded?.currentStep ?? 0);\n  const [videoposition, setVideoposition] = useState(\n    loaded?.videoposition ?? 0\n  );\n  const [progress, setProgress] = useState(loaded?.progress ?? []);\n\n  useEffect(() => {\n    VHEStorage.setObject(storageKey, {\n      uuid,\n      gamesaved,\n      subtitles: false,\n      fullscreen: false,\n      currentStep,\n      videoposition,\n      progress,\n    });\n  }, [uuid, gamesaved, currentStep, videoposition, progress, storageKey]);\n\n  const gameState = useMemo(\n    () => ({\n      newGame: () => {\n        setGamesaved(true);\n        setCurrentStep(0);\n        setVideoposition(0);\n        setProgress([]);\n      },\n      selectOption: (nextId: number, label: string) => {\n        setProgress((ps) => [\n          ...ps,\n          {\n            id: currentStep,\n            label: label,\n            option: nextId,\n          },\n        ]);\n        setCurrentStep(nextId);\n      },\n      currentStep,\n      setCurrentStep,\n      videoposition,\n      setVideoposition,\n      progress,\n      gamesaved,\n    }),\n    [currentStep, gamesaved, progress, videoposition]\n  );\n\n  return gameState;\n};\n\nexport default useGameState;\n","import { useCallback } from \"react\";\nimport { useHistory } from \"react-router\";\nimport useLogGameEvent from \"./hooks/useLogGameEvent\";\n\nexport function generateUUID(): string {\n  var r: string;\n  let d = new Date().getTime();\n  if (\n    typeof performance !== \"undefined\" &&\n    typeof performance.now === \"function\"\n  ) {\n    d += performance.now(); //use high-precision timer if available\n  }\n  r = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === \"x\" ? r : (r & 0x3) | 0x8).toString(16);\n  });\n  return r;\n}\n\nexport const useGotoMenu = () => {\n  const history = useHistory();\n  const logGameEvent = useLogGameEvent();\n\n  const gotoMenu = useCallback(() => {\n    logGameEvent(\"\", \"open\", \"menu\", \"\", \"\");\n    history.push(`/`);\n  }, [history, logGameEvent]);\n  return gotoMenu;\n};\n\nexport function getBrowser() {\n  var browser, isIE;\n  // @ts-ignore\n  isIE = /*@cc_on!@*/ false || !!document.documentMode;\n\n  // @ts-ignore\n  if (\n    // @ts-ignore\n    (!!window.opr && !!opr.addons) ||\n    // @ts-ignore\n    !!window.opera ||\n    navigator.userAgent.indexOf(\" OPR/\") >= 0\n  ) {\n    browser = \"Opera\";\n\n    // @ts-ignore\n  } else if (typeof InstallTrigger !== \"undefined\") {\n    browser = \"Firefox\";\n    // @ts-ignore\n  } else if (\n    // @ts-ignore\n    /constructor/i.test(window.HTMLElement) ||\n    (function (p) {\n      return p.toString() === \"[object SafariRemoteNotification]\";\n    })(\n      // @ts-ignore\n      !window[\"safari\"] ||\n        // @ts-ignore\n        (typeof safari !== \"undefined\" && safari.pushNotification)\n    )\n  ) {\n    browser = \"Safari\";\n  } else if (isIE) {\n    browser = \"Internet Explorer\";\n    // @ts-ignore\n  } else if (!isIE && !!window.StyleMedia) {\n    browser = \"Edge\";\n    // @ts-ignore\n  } else if (\n    // @ts-ignore\n    !!window.chrome &&\n    // @ts-ignore\n    (!!window.chrome.webstore || !!window.chrome.runtime)\n  ) {\n    browser = \"Chrome\";\n  } else {\n    browser = \"Unknown browser\";\n  }\n  return browser;\n}\n","import { useCallback, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./Intro.scss\";\n\ninterface iProps {\n  strings: {\n    introCards: string[];\n  };\n}\n\nconst Intro: React.FC<iProps> = ({ strings }) => {\n  const history = useHistory();\n\n  const [currentMessage, setCurrentMessage] = useState(0);\n  const intro = strings.introCards;\n\n  const skipToNext = useCallback(\n    (evt: React.MouseEvent<HTMLButtonElement>) => {\n      if (currentMessage < intro.length - 1) {\n        setCurrentMessage((n) => n + 1);\n        evt.currentTarget.blur();\n      } else {\n        history.push(`/video/`);\n      }\n    },\n    [currentMessage, history, intro.length]\n  );\n\n  const text = intro[currentMessage];\n\n  return (\n    <div className=\"container\">\n      <div className=\"intro\">\n        <div className=\"main\">\n          <div className=\"content\">{text}</div>\n        </div>\n        <footer>\n          <button className=\"button\" onClick={skipToNext}>\n            Next\n          </button>\n        </footer>\n      </div>\n    </div>\n  );\n};\n\nexport default Intro;\n","import { useCallback, useState } from \"react\";\nimport \"./DropDown.scss\";\n\ninterface iProps {\n  className?: string;\n  label: string;\n}\n\nconst DropDown: React.FC<iProps> = ({ className, label, children }) => {\n  const [expanded, setExpanded] = useState(false);\n  const toggleExpanded = useCallback(() => {\n    setExpanded((e) => !e);\n  }, []);\n\n  const collapse = useCallback(() => {\n    setExpanded(false);\n  }, []);\n  const baseClassName = `DropDown DropDown${\n    expanded ? \"--expanded\" : \"-collapsed\"\n  }`;\n\n  return (\n    <div\n      className={className ? `${baseClassName} ${className}` : baseClassName}\n    >\n      <button onClick={toggleExpanded} className=\"DropDown__button\">\n        {label}\n      </button>\n      <div className=\"DropDown__content\" onClick={collapse}>\n        {children}\n      </div>\n    </div>\n  );\n};\n\nexport default DropDown;\n","import { FormattedMessage } from \"react-intl\";\nimport \"./Research.scss\";\n\nconst Research: React.FC<{}> = () => {\n  return (\n    <div className=\"container\">\n      <div className=\"panel credits\">\n        <header>\n          <h2>\n            <FormattedMessage\n              id=\"Research.title\"\n              defaultMessage=\"Research\"\n              description=\"research title\"\n            />\n          </h2>\n        </header>\n        <div className=\"main\">\n          <div className=\"research\">\n            <p>\n              According to the World Health Organization (WHO) (2019), an\n              approximate 800,000 people die every year due to suicide. Suicide\n              risk is common among individuals with underlying mental health\n              disorders, and individuals in midst crisis situations that feel\n              impotent in dealing with life stressors (WHO, 2019). With increase\n              occurrences of suicide, health care providers have incorporated\n              suicide risk assessment (SRA) into practice. The American\n              Psychiatric Association defines the goal of SRA as identifying\n              factors that may increase or decrease a patients level of suicide\n              risk, to estimate an overall level of risk, and to develop a care\n              plan that addresses their safety and modifiable contributors to\n              suicide risk (Bucago, Cheung, & Zhang, 2019).{\" \"}\n            </p>\n\n            <p>\n              {\" \"}\n              Besides the significance of SRA, it has a continuous process which\n              involves four essential principles. Principles included are: the\n              therapeutic relationship, communication and collaboration,\n              documentation in the assessment process, and cultural awareness.\n              Establishing a therapeutic rapport can improve the SRA process;\n              while communication is critical to ensure SRA remains consistent;\n              also producing clear notes can help plan for treatments and\n              preventative care; and acknowledging culture to be a potential\n              influence on suicide (Perlman, Neufeld, Martin, Goy, & Hirdes,\n              2011). Altogether these principles guide the assessment process.{\" \"}\n            </p>\n\n            <p>\n              On the other hand, Sadek (2018) also identifies the SRA process in\n              three steps. Step one  building a therapeutic relationship and\n              alliance with the patients and asking about suicidal ideation. As\n              previously mentioned, creating a therapeutic alliance is an\n              essential foundation for SRA which involves empathy, support and\n              transparency (Sadek, 2018). Additionally, step two  identify risk\n              factors, noting those that can be modified to reduce risk. This\n              step has the potential to seek risk factors based on the\n              information received from the patient and collateral sources such\n              as family (Sadek, 2018). Lastly, step three  formulating risk:\n              make a clinical judgement of the risk that a patient/client may\n              attempt or complete suicide in the short or long term. During this\n              step, clinical formulation of risk is considered such as a low\n              acute risk, or high chronic risk (Sadek, 2018). Collectively, the\n              three steps reflect on the amount of work put into the SRA\n              process.{\" \"}\n            </p>\n\n            <p>\n              SRA is primarily conducted in a health care setting. However, this\n              assessment should only be conducted if it is a first psychiatric\n              admission, and/or the individual is exhibiting suicidal\n              behaviour/ideation (Centre for Addiction and Mental Health, 2011).\n              Besides SRAs being a complex process; it also requires extensive\n              knowledge prior to implementing it into practice. Therefore, this\n              literature seeks to identify the significance of SRA, current SRA\n              in effect, commonly utilized SRA tools, choosing an effective SRA\n              tool, the different views on SRA, and SRA benefits and drawbacks.{\" \"}\n            </p>\n\n            <h2>Significance of SRA</h2>\n            <p>\n              SRA are useful tools for service providers and have been\n              identified internationally as a fundamental safety issue among\n              health care organizations (Perlman et al., 2011). Throughout\n              Canada, suicide is the ninth leading cause of death across all\n              ages, with a rate of 10.3 deaths per 100,000 people (Sadek, 2020).\n              With this being said, according to the World Health Organization\n              (WHO), suicide is one of the top 10 causes of death, and the\n              second leading cause of death in people aged 1529 years (Sadek,\n              2018). This illustrates the extreme need for accurate assessment\n              by health care professionals. In addition, suicide does not only\n              affect the individual who loses their life, but also deeply\n              effects peers, friends, family members, coworkers, and overall\n              communities (CPSI et al., 2021). Suicides often profoundly affect\n              at least 15 people aside from the individual who has passed away\n              (CPSI et al., 2021). Besides the long-lasting emotional effects\n              left on these other parties, there are also large expenses\n              associated with suicide. A mental health commission report in 2016\n              explained that the estimated financial cost of a suicide ranges\n              from $433,000 to $4,131,000 per individual, depending on potential\n              years of life lost, income level, and effects on survivors (Sadek,\n              2018).{\" \"}\n            </p>\n\n            <p>\n              Health care professionals, more specifically mental health care\n              providers, have the task of supporting individuals through times\n              of poor mental wellness, as well as maintaining positive mental\n              health. Roush et al. (2018) references that individuals who lose\n              their life from suicide have had contact with a mental health\n              professional within one month prior to passing, approximately 20%\n              of the time. These professionals are in a key position where they\n              are able to appropriately assess suicide risk and make potentially\n              life-saving decisions regarding SRA and management, often through\n              using SRA tools (Roush et al., 2018). There are often several\n              measures that can be taken in order to assist in reducing the risk\n              of suicide and suicide attempts (CPSI et al., 2021) and the\n              assessment and management of suicide risk is considered a core\n              competency for psychiatrists (Oquendo & Bernanke, 2017).{\" \"}\n            </p>\n\n            <h2>Current SRA in Effect</h2>\n            <p>\n              In current literature, SRA remains an ongoing process that\n              involves various tools. SRA tools are significant to the\n              assessment process, as it has the advantage to provide additional\n              information to inform clinical decision making about suicide (CPSI\n              et al., 2021). Typically, the guidelines for SRA are standardized\n              in psychiatric facilities. Following the process of screening,\n              monitoring, intervention and follow-up to continuously inform\n              initial care for progress in treatment and potential changes to\n              the level of care (Perlman et al., 2011). To conduct an SRA most\n              studies, focus on clinical experience to be an asset. Perlman et\n              al. (2011) recommends professionals to understand SRA tools, in\n              order to help navigate the SRA process. While, Sadek (2018) and\n              Sadek et al. (2020) studies agrees that clinician awareness and\n              training should be required to assess for suicide risk, as\n              clinical competency is essential for patient care.\n            </p>\n\n            <p>\n              Although, a substantial amount of research points out the\n              inadequacy of SRA implemented into practice. Most concerns are\n              about the lack of education and training health care professionals\n              have surrounding conducting a SRA (Sadek, 2018). The complexity of\n              a SRA can reflect on the quality of care. It is essential changes\n              are made to improve the SRA process, to effectively document and\n              assist an individual at risk of suicide. Perlman at al. (2011)\n              outlines resources available to support the SRA process,\n              including, clinical guides and best practice guidelines. On the\n              other hand, effective communication remains critical in health\n              care settings. Healthcare teams must maintain communication about\n              patient suicide risk as an important part of ongoing care (Sadek,\n              2018). Potentially encouraging the professional to perform and\n              document SRA with competency. As Perlman et al. (2011) believes in\n              incorporating mandatory competency-based education and training in\n              SRA and the use of each SRA tool for the future. Overall, SRA and\n              the inclusion of risk assessment tools are utilized in practices\n              today, but further professional enhancement is required to\n              understand suicide risk better among patients.{\" \"}\n            </p>\n\n            <h2>Commonly Utilized SRA Tools</h2>\n\n            <p>\n              Research has illustrated several SRA tools in the field of\n              practice. While it is important to note, there is not one\n              prominent tool. Instruments may range from screening tools to\n              assessment tools (Sadek, 2018). Although some of the most common\n              SRA tools share similar attributes. Essentially, the tools tend to\n              focus on symptom assessment, warning signs for suicide, and\n              resilience factors (Perlman et al., 2011). As Perlman et al.\n              (2011) states instruments have been designed for the detection\n              and assessment of suicide risk in a variety of settings.\n            </p>\n\n            <p>\n              On the other hand, scores from tools are easy to be\n              misinterpreted. Perlman et al. (2011) demands health care\n              providers utilizing these tools to not be completely reliant on\n              them. Aforementioned, rather the idea of scores developed from\n              tools is to gather information to help inform clinical decision\n              making about suicide. Tools may vary in characteristics, but also\n              to those who perform it. It is strongly recommended SRA tools are\n              administered by a professional with clinical experience and\n              training. But, there are existing SRA tools that do not require a\n              professional (CPSI et al., 2021).{\" \"}\n            </p>\n\n            <p>\n              However, evidence has proved most common SRA scales are promising.\n              As each provide adequate to strong internal consistency, but also\n              are related to other indicators of suicide risk (Perlman et al.,\n              2011). With that being said, some of the common utilized SRA tools\n              established in literature, include: the SAD Persons Scale, Beck\n              Hopelessness Scale (BHS), SAFE- T and the Sadek Suicide Prevention\n              Assessment (SSPA) Tool.\n            </p>\n\n            <h2>The SAD Persons Scale.</h2>\n            <p>\n              This assessment tool utilizes the acronym SAD PERSONS as a way to\n              determine the risk of an individual for suicide. The acronym\n              outlines potential risk factors, e.g. s  sex, a  age, and d \n              depression, as a guide to understand the suicide risk. While the\n              theory of this scale is that the more areas that an individual fit\n              into, the higher risk the individual would be considered (CAMH,\n              2011).\n            </p>\n\n            <h2>Beck Hopelessness Scale (BHS).</h2>\n            <p>\n              This scale was often noted in the literature as resourceful. Sadek\n              (2018) stated It was mainly designed to measure negative\n              attitudes about ones future and perceived inability to avert\n              negative life events. The scale has 20 statements that are either\n              answered through a true or false measure (e.g. scored 0 or 1).\n              Particularly, it measures three aspects of hopelessness including:\n              negative feeling about the future, loss of motivation and\n              pessimistic expectations (Sadek, 2018). The ratings are then\n              summed, as the cut-off score for the BHS is greater than 9. A\n              similar scale is referred to as the Beck Scale for Suicide\n              Ideation (BSS). This measures the current intensity of attitudes,\n              and plans for suicide-related behaviour (Sadek, 2018). BHS is not\n              recommended in emergency settings, but BSS would be more\n              applicable.{\" \"}\n            </p>\n\n            <h2>SAFE-T.</h2>\n            <p>\n              The tool SAFE-T is an acronym that stands for Suicide Assessment\n              Five-step Evaluation and Triage. It was developed as a\n              collaboration between Screening for Mental Health, Inc, and the\n              Suicide Prevention Center (CAMH, 2011). The purpose of this tool\n              is to identify risk factors and protective risk factors, conduct\n              suicide inquiry, determine risk level and document for follow-up.\n            </p>\n\n            <h2>Sadek Suicide Prevention Assessment Tool(SSPA).</h2>\n            <p>\n              Research has outlined this new SRA tool that is vital in\n              practices. It captures validated risk and protective factors\n              related to the mental status of patients during the clinical\n              interview, and factors related to the patient profile, in addition\n              to areas of risk (Sadek et al., 2020). This tool is different and\n              more practical because it has a section for communication.\n              Potentially, it can notify other providers involved in the care of\n              the patient to be aware of their suicide risk (Sadek et al.,\n              2020). SSPA has many unique features that most tools do not. Sadek\n              (2018) believes this tool will help in areas of documenting the\n              level of the suicide risk (high, moderate, low), understand the\n              reason for assessment and to communicate SRA results with other\n              clinicians. These are critical when utilizing SRA tools on\n              patients.{\" \"}\n            </p>\n\n            <p>\n              In summary, the SAD Persons Scale, BHS, SAFE- T and Sadeks\n              Suicide Prevention Assessment Tool are commonly known in practice,\n              and continue to be utilized today. These tools each in which shed\n              light on a persons degree risk of suicide, enabling professionals\n              to better support their patients and provide them with the best\n              quality of care.\n            </p>\n\n            <h2>Choosing an Effective SRA Tool</h2>\n            <p>\n              As previously discussed, there are a variety of SRA tools that may\n              be utilized in practice. Recent literature mentions a\n              non-exhaustive list of tools to consider (Sadek, 2018). As CPSI et\n              al., (2021) specifies that various tools have certain\n              characteristics and choosing the most adequate one can be complex.\n              Prior to choosing a tool, it is significant to acknowledge the\n              sole purpose of an effective SRA. It is strongly recommended SRA\n              tools to not be used as a way to predict suicide. Rather it helps\n              assess and reduce the risk of suicide, inform treatment planning,\n              and to promote wellness and recovery through the gathering of\n              information (CPSI et al., 2021). Additionally, Perlman et al.\n              (2011) outlines the identification of protective factors as an\n              essential component of SRA, potentially identifying strengths and\n              resiliency that may be used to buffer suicide risk.\n            </p>\n\n            <p>\n              Furthermore, choosing an effective SRA tool initiates with\n              clinical judgement. With the expectation professionals are\n              educated and trained, they know which tool is best to support the\n              patient. As Sadek (2018) states, not all patients require the same\n              evaluations; SRA can be applied with various degrees of intensity\n              depending on the information obtained from the patient and\n              collateral sources. This being said, research focused primarily on\n              factors that should be considered when evaluating the suitability\n              of risk assessment tools. Technical considerations include:\n              correlation, reliability, validity, sensitivity, specificity,\n              factor analysis, threshold scores, modes of administration\n              (Perlman et al., 2011). Particularly reviewing psychometric\n              properties by gathering information on presence of suicide desire,\n              intent and capability (CPSI et al., 2021).\n            </p>\n\n            <p>\n              Besides the evaluative intent, setting is crucial in the type of\n              risk assessment tool utilized to approach an SRA. CPSI et al.\n              (2021) examines with rapid changes and new availability of mental\n              health services, SRA may be either effective remotely or\n              in-person. Moreover, culture is another factor to consider when\n              selecting a SRA tool. Risk assessment gathers history of several\n              aspects of an individuals life, but steers away from demographic\n              characteristics. Current history collected include risk factors,\n              clinical mental health status examinations, and collateral sources\n              such as violence towards self or others (Sadek, 2018). It is\n              critical specific tools are made available to different cultures\n              to fit their particular needs. These tools may not only understand\n              different cultures views on health or wellness, but may recognize\n              that these different cultures views may influence motives of\n              suicide related risk or behaviours (CPSI et al., 2021). All in\n              all, the goal is for health care professionals to feel competent\n              enough in choosing the most effective SRA tool based on\n              information gathered on the patient; supporting them through\n              suicidality.\n            </p>\n\n            <h2>Different Views on SRA </h2>\n\n            <p>\n              There is a significant amount of discussion surrounding SRA tools\n              and their viability. Even suicide itself and the ability to\n              prevent it from occurring is often up for debate. Some individuals\n              believe that suicide is preventable (CPSI et al., 2021) while\n              there are others who believe that suicide is not always entirely\n              preventable (Perlman et al., 2011). This leaves a lot of room for\n              conversation surrounding what viable means in the case of SRAs.\n              There are different SRAs that can be applied in varying\n              intensities and in varying situations (Sadek, 2018), giving much\n              leeway to different understandings on what the best treatments or\n              assessments may be effective. SRAs can be administered in many\n              different ways such as self-reports or through clinically\n              administered interviews and observations, either orally, with\n              pencil and paper, and/or electronically (CPSI et al., 2021).{\" \"}\n            </p>\n\n            <p>\n              When choosing how to appropriately assess and support service\n              users, some health professionals choose to strictly use\n              assessments and tools. For instance, the Columbia-Suicide Severity\n              Rating Scale and the Suicide Probability Scale (Sadek, 2020) have\n              a large amount of empirical research to back them up (Roush et\n              al., 2018). Examples of older tools could be the Manchester\n              Self-harm Rule and the Repeated Episodes of Self-harm score, which\n              used more methodology and are often not strong enough to make a\n              clinical decision as they are too based in numerical results.\n              Others use tools that are more based in building rapport and\n              relationships between the service user and the service provider.\n              Some tools that are less based in empirical research include:\n              obtaining consent to speak with significant others in the\n              patients social support network about suicide risk, utilizing\n              suicide safety plans (e.g. lists of coping strategies, triggers,\n              and support systems), providing contacts with suicide helplines,\n              and no-suicide contracts (Roush et al., 2018).\n            </p>\n\n            <p>\n              Some mental health professionals are reluctant to use SRAs,\n              worrying that some may be too inaccurate to be useful or that\n              focusing on risk management too deeply might lead to defensive\n              medicine (Oquendo & Bernanke, 2017). SRAs can also be viewed as\n              critical to the assessment process. However, they should be used\n              to inform clinical judgement rather than replace it (CPSI et al.,\n              2021). These assessments, whether rooted in empirical research or\n              not, are not the end of all, as it is important professionals rely\n              on their own skills to understand the essence of another human\n              being; essentially trusting their own personal judgement, opposed\n              to relying only on SRAs.\n            </p>\n\n            <h2>SRA Benefits and Drawbacks</h2>\n            <p>\n              SRAs have definite benefits, as explained throughout this\n              literature review. The use of SRAs can assist health care\n              providers to assess the risk a service user has to take part in\n              suicide and can provide documentation on what the SRA consisted of\n              (Sadek, 2018). However, there are also many possible drawbacks\n              related to SRAs. Starting at the base level; the beginning, there\n              is the training that mental health care providers receive\n              regarding crisis and suicide supports or assessments. SRAs\n              require training and the understanding that assessment is an\n              ongoing process where the risks may change over time (Sadek,\n              2018). There is sudden concern because health care providers do\n              not receive enough crisis training and often feel fear and a lack\n              of confidence (Roush et al., 2018). Service users passing by\n              suicide is also the most common fears faced by health care\n              providers (Roush et al., 2018). This can often negatively affect\n              mental health workers when they are making treatment decisions\n              (Sadek, 2018).\n            </p>\n\n            <p>\n              Whether knowingly or not, health care providers may have negative\n              or anxious views surrounding service users who are suicidal which\n              can affect the outcome of treatments (Sadek, 2018). Health care\n              providers often rely on subjectively reported information, which\n              does not always show the full picture of risk (Sadek, 2018). This\n              can be minorly avoided if a health care provider can get a more\n              complete picture by collecting collateral information about the\n              service user (Sadek, 2018). It is tricky to find the perfect\n              practices because tool guidelines are not all the same in their\n              recommendations and there are no universally accepted models\n              (Oquendo & Bernanke, 2017). Although SRAs are not perfect and\n              need more advancements, they have aided in managing and supporting\n              suicidal service users (Oquendo & Bernanke, 2017).\n            </p>\n\n            <h2>Conclusion </h2>\n\n            <p>\n              Suicide risk assessments are essential tools for health care\n              workers. SRAs come in many different varieties and have various\n              considerations that are necessary when using these assessments.\n              But these tools allow a dialogue to be created between service\n              provider and service user and can overall help with lowering\n              suicide rates (Sadek, 2018), which ultimately is a goal of mental\n              health professionals. More research is needed but there are many\n              signs that these tools, if utilized properly, are extremely\n              helpful for mental health professionals.\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Research;\n","import { FormattedMessage } from \"react-intl\";\n\nconst Readings: React.FC<{}> = () => {\n  return (\n    <div className=\"container\">\n      <div className=\"panel readings\">\n        <header>\n          <h2>\n            <FormattedMessage\n              id=\"Readings.title\"\n              defaultMessage=\"Readings\"\n              description=\"readings title\"\n            />\n          </h2>\n        </header>\n        <div className=\"main\">\n          <div className=\"content cf\">\n            <ul>\n              <li>\n                Bucago, C., Cheung, H., & Zhang, M. (2019). Suicide Risk\n                Assessment and the Role of the Community Pharmacist. Pharmacy\n                Connection. Retrieved from\n                https://pharmacyconnection.ca/suicide-risk-assessment-and-the-role-of-the-community-\n                pharmacist-fall-2019/{\" \"}\n              </li>\n\n              <li>\n                Centre for Addiction and Mental Health. CAMH Suicide Prevention\n                and Assessment Handbook. (2011). Retrieved January 28th, 2021,\n                from http://www.antoniocasella.eu/salute/CAMH_2011.pdf{\" \"}\n              </li>\n\n              <li>\n                Government of Canada. (2020). Suicide rates in Canada: Key\n                Statistics. Retrieved January 30, 2021 from:\n                https://www.canada.ca/en/public-health/services/publications/healthy-living/suicide-canada-key-statistics-infographic.html{\" \"}\n              </li>\n\n              <li>\n                Oquendo, M., & Bernanke, J. (2017). Suicide risk assessment:\n                tools and challenges. World Psychiatry, 16(1), 2829.\n                https://doi.org/10.1002/wps.20396{\" \"}\n              </li>\n\n              <li>\n                Perlman CM, Neufeld E, Martin L, Goy M, & Hirdes JP (2011).\n                Suicide Risk Assessment Inventory: A Resource Guide for Canadian\n                Health care Organizations. Toronto, ON: Ontario Hospital\n                Association and CanadianPatient Safety Institute.{\" \"}\n              </li>\n\n              <li>\n                Roush, J., Brown, S., Jahn, D., Mitchell, S., Taylor, N.,\n                Quinnett, P., & Ries, R. (2018). Mental Health Professionals\n                Suicide Risk Assessment and Management Practices. Crisis: the\n                Journal of Crisis Intervention and Suicide Prevention, 39(1),\n                5564. https://doi.org/10.1027/0227-5910/a000478{\" \"}\n              </li>\n\n              <li>\n                Sadek, J. (2018). A Clinicians Guide to Suicide Risk Assessment\n                and Management. Springer.\n                https://doi.org/10.1007/978-3-319-77773-3{\" \"}\n              </li>\n\n              <li>\n                Sadek, J., Pyche, M., Theriault, S., Delva, N., Chehil, S., &\n                Pilon, D. (2020). A new suicide risk assessment tool in Nova\n                Scotia, Canada. Clinical and Investigative Medicine (Online),\n                43(1), E30-E34.{\" \"}\n              </li>\n\n              <li>\n                The Canadian Patient Safety Institute & Mental Health Commission\n                of Canada. (2021). Suicide Risk Assessment Toolkit: A Resource\n                for Healthcare Workers and Organizations. Retrieved February\n                1st, 2021, from\n                https://www.mentalhealthcommission.ca/sites/default/files/2021-\n                01/mhcc_cpsi_suicide_risk_assessment_toolkit_eng.pdf{\" \"}\n              </li>\n\n              <li>\n                World Health Organization (2019, September 2). Suicide.\n                Retrieved February 1st, 2021, from\n                https://www.who.int/news-room/fact-sheets/detail/suicide{\" \"}\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Readings;\n","import React, { useCallback, useMemo, useState } from \"react\";\n\nimport {\n  Switch,\n  Link,\n  Route,\n  useHistory,\n  Redirect,\n  useLocation,\n} from \"react-router-dom\";\nimport { FormattedMessage, useIntl } from \"react-intl\";\n\nimport Menu from \"./pages/Menu\";\nimport \"./App.scss\";\n\nimport { useGameData } from \"./hooks/useGameData\";\n\nimport Objectives from \"./pages/Objectives\";\nimport Decision from \"./pages/Decision\";\nimport Video from \"./pages/Video\";\nimport Credits from \"./pages/Credits\";\nimport Instructions from \"./pages/Instructions\";\nimport Feedback from \"./pages/Feedback\";\nimport Settings from \"./pages/Settings\";\nimport Summary from \"./pages/Summary\";\nimport Resources from \"./pages/Resources\";\nimport Transition from \"./pages/Transition\";\nimport Principles from \"./pages/Principles\";\nimport Chart from \"./pages/Chart\";\nimport Scenario from \"./pages/Scenario\";\nimport useLogGameEvent from \"./hooks/useLogGameEvent\";\nimport { getBrowser } from \"./util\";\nimport useGameState from \"./hooks/useGameState\";\nimport Intro from \"./pages/Intro\";\nimport DropDown from \"./components/DropDown\";\nimport Research from \"./pages/Research\";\nimport Readings from \"./pages/Readings\";\nimport MenuItems from \"./components/MenuItems\";\n\ninterface iProps {}\n\nconst App: React.FC<iProps> = () => {\n  const history = useHistory();\n  const location = useLocation();\n\n  const logGameEvent = useLogGameEvent();\n  const locale = useIntl().locale;\n\n  const gameData = useGameData(\"crisis_intervention\", locale);\n  const gameState = useGameState(\"crisis_intervention\");\n  const [subtitlesEnabled, setSubtitlesEnabled] = useState<boolean>(true);\n  const minSteps = gameData.decisionpoints.filter(\n    ({ correct }) => correct === \"correct\"\n  ).length;\n\n  let onExpandedNavMenuPage: boolean;\n\n  const base = location.pathname.split(\"/\")[1];\n  switch (base) {\n    case \"video\":\n    case \"decision\":\n    case \"intro\":\n    case \"summary\":\n    case \"settings\":\n    case \"feedback\":\n      onExpandedNavMenuPage = false;\n\n      break;\n    default:\n      onExpandedNavMenuPage = true;\n  }\n\n  const [navMenuExpanded, setNavMenuExpanded] = useState(onExpandedNavMenuPage);\n  const handleMenuToggleButtonClick = useCallback(() => {\n    setNavMenuExpanded(true);\n\n    history.push(`/instructions/`);\n  }, [history]);\n\n  const lastDecisionPoint =\n    gameData.decisionpoints[gameData.decisionpoints.length - 1].id ===\n    gameState.currentStep;\n\n  const currentDecisionPoint = useMemo(() => {\n    return gameData.decisionpoints.find(\n      ({ id }) => id === gameState.currentStep\n    )!;\n  }, [gameData.decisionpoints, gameState.currentStep]);\n\n  const handleStartNewGame = useCallback(\n    (evt: React.MouseEvent<HTMLButtonElement>) => {\n      evt.currentTarget.blur();\n\n      gameState.newGame();\n      setNavMenuExpanded(false);\n      history.push(`/chart/`);\n      logGameEvent(\"\", \"start\", \"game\", getBrowser(), \"\");\n    },\n    [history, logGameEvent, gameState]\n  );\n\n  const handleResumeGame = useCallback(\n    (evt: React.MouseEvent<HTMLButtonElement>) => {\n      evt.currentTarget.blur();\n\n      var dp = currentDecisionPoint;\n      setNavMenuExpanded(false);\n\n      if (dp && lastDecisionPoint) {\n        history.push(`/summary/`);\n      } else if (gameState.videoposition > 0.1) {\n        history.push(`/video/`);\n      } else if (gameState.currentStep === 0) {\n        history.push(`/intro/`);\n      } else {\n        history.push(`/decision/`);\n      }\n\n      logGameEvent(\"\", \"resume\", \"game\", \"\", \"\");\n    },\n    [\n      history,\n      logGameEvent,\n      gameState.videoposition,\n      gameState.currentStep,\n      currentDecisionPoint,\n      lastDecisionPoint,\n    ]\n  );\n\n  const handleHideMenu = useCallback(() => {\n    setNavMenuExpanded(false);\n  }, []);\n\n  const handleOptionChosen = useCallback(\n    (nextId: number, label: string) => {\n      const next = gameData.decisionpoints.find(({ id }) => id === nextId);\n\n      gameState.selectOption(nextId, label);\n\n      logGameEvent(\"\", \"select\", \"answer\", label, next?.correct);\n\n      switch (next?.type) {\n        case \"video\":\n          history.push(`/video/`);\n          break;\n        case \"lo\":\n          if (next.feedback > \"\") {\n            // If there's feedback, show it then advance\n            history.push(`/feedback/`);\n          } else {\n            history.push(`/lo/`);\n          }\n          break;\n      }\n\n      // google analytics ???\n    },\n    [gameData.decisionpoints, history, logGameEvent, gameState]\n  );\n\n  const handleVideoFinished = useCallback(() => {\n    const dp = currentDecisionPoint;\n    gameState.setVideoposition(0);\n\n    if (lastDecisionPoint) {\n      history.push(`/summary/`);\n    } else if (dp && dp.options.length > 0) {\n      if (dp.feedback > \"\") {\n        history.push(`/feedback/`);\n      } else {\n        // No feedback means go directly to the decision\n        history.push(`/decision/`);\n      }\n    } else {\n      gameState.setCurrentStep(gameState.currentStep + 1);\n      if (dp?.next) {\n        // If there are no options, go to the next decision point\n        history.push(`/lo/`);\n      } else {\n        history.push(`/transition/`);\n      }\n    }\n  }, [currentDecisionPoint, history, lastDecisionPoint, gameState]);\n\n  return (\n    <div className=\"fullscreen\" style={gameData.colors as React.CSSProperties}>\n      <header className=\"nav-header\">\n        <button className=\"menu-button\" onClick={handleMenuToggleButtonClick}>\n          Home\n        </button>\n\n        <Link className=\"Button\" to={`/settings/`} onClick={handleHideMenu}>\n          <FormattedMessage\n            id=\"Menu.settings\"\n            defaultMessage=\"Settings\"\n            description=\"Settings Button\"\n          />\n        </Link>\n\n        <h1>{gameData.strings.menu.title}</h1>\n\n        <DropDown label=\"Game\">\n          <button onClick={handleStartNewGame}>New Game</button>\n          <button onClick={handleResumeGame}>Resume</button>\n        </DropDown>\n        <DropDown className=\"nav-header__content-dropdown\" label=\"Content\">\n          <MenuItems\n            pagesToShow={{\n              principles: !!gameData.strings.principles,\n            }}\n          />\n        </DropDown>\n      </header>\n\n      <div className=\"content\">\n        <div\n          className={`banner ${\n            navMenuExpanded ? \"banner--expanded\" : \"banner--collapsed\"\n          }`}\n        >\n          <img\n            src=\"/images/hand-left.png\"\n            alt=\"person's hand with white skin reaching toward the centre of the screen\"\n            width=\"360px\"\n            height=\"480px\"\n          ></img>\n          <div className=\"quote\">\n            {\" \"}\n            <p>\n              Hope is being able to see that there is light despite all the\n              darkness.\n            </p>{\" \"}\n            <span className=\"quoted-person\">Desmond Tutu</span>\n          </div>\n          <img\n            src=\"/images/hand-right.png\"\n            alt=\"person's hand with black skin reaching toward the centre of the screen\"\n            width=\"360px\"\n            height=\"480px\"\n          ></img>\n        </div>\n\n        <div className=\"body\">\n          <div\n            className={`nav-content ${\n              navMenuExpanded\n                ? \"nav-content--expanded\"\n                : \"nav-content--collapsed\"\n            }`}\n          >\n            <div className=\"nav-menu-title\">Module Content</div>\n            <nav className=\"nav-menu\">\n              <Menu\n                pagesToShow={{\n                  principles: !!gameData.strings.principles,\n                }}\n              />\n            </nav>\n          </div>\n\n          <div className=\"view\" role=\"application\">\n            <Switch>\n              <Route path={`/credits`}>\n                <Credits />\n              </Route>\n\n              <Route path={`/decision`}>\n                <Decision\n                  decisionPoint={currentDecisionPoint}\n                  onOptionChosen={handleOptionChosen}\n                />\n              </Route>\n\n              <Route path={`/feedback`}>\n                <Feedback decisionPoint={currentDecisionPoint} />\n              </Route>\n\n              <Route path={`/instructions`}>\n                <Instructions\n                  minSteps={minSteps}\n                  strings={gameData.strings.instructions}\n                />\n              </Route>\n\n              <Route path={`/intro`}>\n                <Intro strings={gameData.strings.intro} />\n              </Route>\n\n              <Route path={`/objectives`}>\n                <Objectives strings={gameData.strings.objectives} />\n              </Route>\n\n              <Route path={`/chart`}>\n                <Chart image={\"\"} />\n              </Route>\n\n              {gameData.strings.principles ? (\n                <Route path={`/principles`}>\n                  <Principles strings={gameData.strings.principles} />\n                </Route>\n              ) : null}\n\n              <Route path={`/settings`}>\n                <Settings\n                  subtitlesEnabled={subtitlesEnabled}\n                  onSubtitlesToggled={setSubtitlesEnabled}\n                />\n              </Route>\n\n              <Route path={`/resources`}>\n                <Resources />\n              </Route>\n\n              <Route path={`/research`}>\n                <Research />\n              </Route>\n\n              <Route path={`/readings`}>\n                <Readings />\n              </Route>\n\n              <Route path={`/summary`}>\n                <Summary\n                  decisionPoints={gameData.decisionpoints}\n                  gameProgress={gameState.progress}\n                  completed={lastDecisionPoint}\n                />\n              </Route>\n\n              <Route path={`/scenario`}>\n                <Scenario strings={gameData.strings.intro} />\n              </Route>\n\n              <Route path={`/transition`}>\n                <Transition decisionPoint={currentDecisionPoint} />\n              </Route>\n\n              <Route path={`/video`}>\n                <Video\n                  decisionPoint={currentDecisionPoint}\n                  onVideoFinished={handleVideoFinished}\n                  videoposition={gameState.videoposition}\n                  setVideoposition={gameState.setVideoposition}\n                  subtitlesEnabled={subtitlesEnabled}\n                  onSubtitlesToggled={setSubtitlesEnabled}\n                />\n              </Route>\n\n              <Route path={`/lo`}>Something's going on here, I swear</Route>\n\n              <Route path=\"/\">\n                <Redirect to={`/instructions`} />\n              </Route>\n            </Switch>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { IntlProvider } from \"react-intl\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { LoggingContextProvider } from \"./hooks/useLogGameEvent\";\nimport Modal from \"react-modal\";\n\nimport enMessages from \"./lang-compiled/en.json\";\nimport frMessages from \"./lang-compiled/fr.json\";\n\nconst locale = \"en\" as string;\nconst messages = locale === \"fr\" ? frMessages : enMessages;\n\n// Make sure to bind modal to your appElement (https://reactcommunity.org/react-modal/accessibility/)\nModal.setAppElement(\"#root\");\n\nReactDOM.render(\n  <React.StrictMode>\n    <IntlProvider messages={messages} locale={locale} defaultLocale=\"en\">\n      <Router basename=\"/\">\n        <LoggingContextProvider>\n          <App />\n        </LoggingContextProvider>\n      </Router>\n    </IntlProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}